Мы постоянно поддерживаем все нули слева, а все двойки - справа. Если нам встречается какой-то из этих элементов, мы просто перемещаем его и сдвигаем границу, не нарушая этот инвариант.